<?php require_once(__DIR__.'/../html/lti_edit_table.php'); ?>

<style type='text/css'>
  <?php include(__DIR__.'../html/styles.css'); ?>
</style>

<table align='center' class='generalbox'>
  <tr>
    <td align='center'>
      <table border='0' style='margin: 0px 0px 0px 0px;'>
        <tr>
          <td bgcolor="#d8e8d8">&nbsp;</td>
          <td bgcolor="#d8e8d8">
            <?php echo $OUTPUT->heading('<strong>'.$this->ltirec->name.' :: '.get_string('lti_edit','mod_ltids').'</strong>'); ?>
          </td>
          <td bgcolor="#d8e8d8">&nbsp;</td>
        </tr>
      </table>
    </td>
  </tr>
  <tr>
    <td>

      <form name='gsess' method='post' action='<?php echo $this->action_url;?>'>
        <table border='0' align='center' cellpadding='0' cellspacing='0'>
          <tr>
            <?php show_lti_edit_table($this->custom_ary, $this->custom_prm, $this->minstance); ?>
          </tr>
          <tr>
            <td align='center'>
              <input type='hidden' name='id'      value='<?php echo $this->cmid;?>' />
              <input type='hidden' name='course'  value='<?php echo $this->courseid;?>' />
              <input type='hidden' name='ltiid'   value='<?php echo $this->ltirec->id;?>' />
              <input type='hidden' name='others'  value='<?php echo serialize($this->custom_ary->other_cmd);?>' />
              <input type='hidden' name='sesskey' value='<?php echo sesskey();?>' />
              <input type='submit' name='submit_lti_update'  value='<?php echo get_string("update");?>' />
              &nbsp;&nbsp;
              <input type='reset' name='reset'  value='<?php echo get_string("reset");?>' />
              <br /><br />
            </td>
          </tr>
          <tr>
            <td></td>
          </tr>
        </table>
      </form>
    </td>
  </tr>
  <?php if ($this->minstance->custom_params and $this->custom_txt!='') { ?>
  <tr><td><hr /></td></tr>
  <tr>
    <td class='generalboxcontent' align='center'>
      <table align='center' class='generalbox' cellpadding='4' cellspacing='1' border='1'>
        <tr>
          <td>
            <?php echo nl2br($this->custom_txt); ?>
          </td>
        </tr>
      </table>
    </td>
  </tr>
  <?php } ?>
</table>
